# Chapitre V

## Exercice 00 : Bitcoin Exchange

**Exercice : 00**
**Nom : Bitcoin Exchange**

**Dossier de rendu :** `ex00/`
**Fichiers à rendre :** `Makefile`, `main.cpp`, `BitcoinExchange.{cpp, hpp}`
**Fonctions interdites :** Aucune

---

Vous devez créer un programme qui affiche la valeur d’un certain montant de **bitcoin** à une **date donnée**.

Ce programme doit utiliser une **base de données au format CSV** représentant l’évolution du prix du bitcoin dans le temps.
Cette base de données est fournie avec le sujet.

Le programme prendra en entrée un **second fichier**, contenant les différentes dates et valeurs à évaluer.

---

## Règles à respecter

* Le nom du programme doit être **`btc`**.
* Le programme doit prendre **un fichier en argument**.
* Chaque ligne de ce fichier doit respecter le format suivant :

  ```
  date | value
  ```
* Une date valide est toujours au format :

  ```
  Année-Mois-Jour
  ```
* Une valeur valide doit être :

  * un **float** ou un **entier positif**
  * comprise entre **0 et 1000**

Vous devez utiliser **au moins un conteneur STL** dans votre code pour valider cet exercice.

Vous devez gérer les erreurs possibles et afficher des **messages d’erreur appropriés**.

---

## Exemple de fichier `input.txt`

```
date | value
2011-01-03 | 3
2011-01-03 | 2
2011-01-03 | 1
2011-01-03 | 1.2
2011-01-09 | 1
2012-01-11 | -1
2001-42-42
2012-01-11 | 1
2012-01-11 | 2147483648
```

---

## Comportement attendu

Votre programme doit utiliser la valeur indiquée dans le fichier d’entrée.

Il doit afficher sur la **sortie standard** le résultat de la valeur multipliée par le **taux de change correspondant à la date**, selon la base de données.

Si la date indiquée dans le fichier d’entrée **n’existe pas dans la base de données**, vous devez utiliser **la date la plus proche antérieure** présente dans la base de données.

⚠️ Attention :
Vous devez utiliser **la date inférieure la plus proche**, **et non la date supérieure**.

---

## Exemple d’utilisation

```
$> ./btc
Error: could not open file.

$> ./btc input.txt
2011-01-03 => 3 = 0.9
2011-01-03 => 2 = 0.6
2011-01-03 => 1 = 0.3
2011-01-03 => 1.2 = 0.36
2011-01-09 => 1 = 0.32
Error: not a positive number.
Error: bad input => 2001-42-42
2012-01-11 => 1 = 7.1
Error: too large a number.
```

---

⚠️ **Avertissement**
Le(s) conteneur(s) que vous utilisez pour valider cet exercice **ne pourront plus être utilisés pour le reste de ce module**.
